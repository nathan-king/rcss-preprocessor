{
  "name": "RCSS",
  "scopeName": "source.rcss",
  "fileTypes": ["rcss"],
  "patterns": [
    { "include": "#comments" },
    { "include": "#presets" },
    { "include": "#blocks" },
    { "include": "#selectors" },
    { "include": "#properties" },
    { "include": "#variables" },
    { "include": "#tokens" },
    { "include": "#functions" },
    { "include": "#numbers" },
    { "include": "#strings" },
    { "include": "#keywords" }
  ],
  "repository": {
    "comments": {
      "patterns": [
        {
          "name": "comment.line.double-slash.css",
          "match": "//.*$"
        },
        {
          "name": "comment.block.css",
          "begin": "/\\*",
          "end": "\\*/"
        }
      ]
    },

    "presets": {
      "patterns": [
        {
          "name": "rcss.preset",
          "match": "%[A-Za-z0-9_-]+"
        }
      ]
    },

    "variables": {
      "patterns": [
        {
          "match": "(\\$)([A-Za-z_][\\w-]*)",
          "captures": {
            "1": { "name": "rcss.variable.sigil" },
            "2": { "name": "rcss.variable" }
          }
        }
      ]
    },

    "tokens": {
      "patterns": [
        {
          "match": "(@)(\\([^\\)]+\\)|[A-Za-z0-9_-]+(?:\\/[A-Za-z0-9._-]+)?)",
          "captures": {
            "1": { "name": "rcss.token.sigil" },
            "2": { "name": "rcss.token" }
          }
        }
      ]
    },

    "strings": {
      "patterns": [
        {
          "name": "string.quoted.double.css",
          "match": "\"([^\"\\\\]|\\\\.)*\""
        },
        {
          "name": "string.quoted.single.css",
          "match": "'([^'\\\\]|\\\\.)*'"
        }
      ]
    },

    "numbers": {
      "patterns": [
        {
          "name": "constant.numeric.css",
          "match": "\\b-?(?:\\d+\\.\\d+|\\d+|\\.\\d+)(?:rem|px|deg|s|ms|fr|%)?\\b"
        }
      ]
    },

    "functions": {
      "patterns": [
        {
          "name": "support.function.misc.css",
          "begin": "\\b[A-Za-z_][\\w-]*(?=\\()",
          "beginCaptures": {
            "0": { "name": "support.function.misc.css" }
          },
          "end": "\\)",
          "patterns": [
            { "include": "#tokens" },
            { "include": "#numbers" },
            { "include": "#variables" },
            { "include": "#strings" }
          ]
        }
      ]
    },

    "properties": {
      "patterns": [
        {
          "match": "^[\\t ]*([A-Za-z-]+)(?=\\s*:)",
          "captures": {
            "1": { "name": "support.type.property-name.css" }
          }
        }
      ]
    },

    "selectors": {
      "patterns": [
        {
          "match": "^[\\t ]*(#)([A-Za-z0-9_-]+)(?=\\s*\\{)",
          "captures": {
            "1": { "name": "punctuation.definition.entity.css" },
            "2": { "name": "entity.other.attribute-name.id.css" }
          }
        },
        {
          "match": "^[\\t ]*(\\.)([A-Za-z0-9_-]+)(?=\\s*\\{)",
          "captures": {
            "1": { "name": "punctuation.definition.entity.css" },
            "2": { "name": "entity.other.attribute-name.class.css" }
          }
        },
        {
          "match": "^[\\t ]*(\\$)([A-Za-z_][\\w-]*)(?=\\s*\\{)",
          "captures": {
            "1": { "name": "rcss.variable.sigil" },
            "2": { "name": "rcss.selector.variable" }
          }
        },
        {
          "match": "^[\\t ]*([A-Za-z][A-Za-z0-9_-]*)(?=\\s*\\{)",
          "captures": {
            "1": { "name": "entity.name.tag.css" }
          }
        }
      ]
    },

    "blocks": {
      "patterns": [
        {
          "name": "meta.at-rule.block.screen.rcss",
          "begin": "^[\\t ]*(screen)(?=\\s*(\\(|\\{))",
          "beginCaptures": {
            "1": { "name": "keyword.control.at-rule.css" }
          },
          "end": "\\}",
          "patterns": [
            { "include": "#tokens" },
            { "include": "#numbers" },
            { "include": "#variables" },
            { "include": "#properties" },
            { "include": "#selectors" },
            { "include": "#strings" },
            { "include": "#comments" }
          ]
        },
        {
          "name": "meta.at-rule.block.mode.rcss",
          "begin": "^[\\t ]*(dark|light)(?=\\s*\\{)",
          "beginCaptures": {
            "1": { "name": "keyword.control.at-rule.css" }
          },
          "end": "\\}",
          "patterns": [
            { "include": "#tokens" },
            { "include": "#numbers" },
            { "include": "#variables" },
            { "include": "#properties" },
            { "include": "#selectors" },
            { "include": "#strings" },
            { "include": "#comments" }
          ]
        }
      ]
    },

    "keywords": {
      "patterns": [
        {
          "name": "keyword.control.at-rule.css",
          "match": "\\b(apply|screen|dark|light)\\b"
        }
      ]
    }
  }
}
